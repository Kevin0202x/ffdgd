/*! Built by Fruitloops on 27-09-2017 12:19:19 giDealUtils@0.0.5-build.37582+sha.839f1ac.*/
"use strict";angular.module("giDealUtils",["ngResource"]),angular.module("giDealUtils").factory("iDealUtilsHttpInterceptor",["$q","$window","applicationStateService",function(a,b,c){return{request:function(a){return"POST"===a.method&&(a.headers.trxidtoken=c.trxidtoken),a},responseError:function(c){return 401===c.status&&"true"===c.headers()["x-session-expired"]&&b.location.replace("https://bankieren.ideal.ing.nl/ideal/betalen/index"),a.reject(c)},response:function(b){var c=b.data.httpStatusCode;if(204===b.status)return b.data=void 0,b;if(b.config.url.indexOf(".html")>0)return b;if(angular.isDefined(c))return b.status=c,a.reject(b);var d=b.config.headers.Accept||b.config.headers.accept,e=b.headers()["content-type"];if(angular.isDefined(e)){var f=e.indexOf(";");angular.equals(f,-1)||(e=e.substr(0,f))}return angular.isUndefined(e)||angular.equals(d.indexOf(e),-1)?(b.status=500,a.reject(b)):b}}}]),angular.module("giDealUtils").factory("iDealUtilsLogoutService",["$q","$resource",function(a,b){var c=function(){var c=a.defer();return(new Image).src="https://ideal.ing.nl/internetbankieren/SesamLogoutServlet",b("https://bankieren.ideal.ing.nl/pkmslogout").get({},function(){c.resolve()},function(){c.resolve()}),c.promise};return{logout:c}}]),angular.module("giDealUtils").service("iDealUtilsSiteMapService",["$q","$resource",function(a,b){var c=null,d=b("/api/ideal/",{},{sitemap:{method:"GET",isArray:!1,cache:!0},cancelSitemap:{url:"/api/ideal/cancel",method:"GET",isArray:!1,cache:!0}}),e=function(b){var e=a.defer();return b?d.cancelSitemap({},function(a){e.resolve(a)},function(a){e.reject(a)}):d.sitemap({},function(a){c=a,e.resolve(a)},function(a){e.reject(a)}),e.promise},f=function(){return c};return{getSiteMapCache:f,endpoints:e}}]),angular.module("giDealUtils").service("iDealUtilsHalResourceService",["$q","$resource","iDealUtilsSiteMapService",function(a,b,c){var d=function(b,d,f){var g;return d?(g=d._links[b][0].href,e(g)):c.endpoints(f).then(function(a){return g=a._links[b][0].href,e(g)},function(b){b.data={},b.data._error={},b.data._error.label="MSG_Tech_TechnicalError";var c=a.defer();return c.reject(b),c.promise})},e=function(c){var d=a.defer(),e=b(c,{});return e.get(function(a){d.resolve(a)},function(a){a.data&&a.data._error||(a.data={},a.data._error={},a.data._error.label="MSG_Tech_TechnicalError"),d.reject(a)}),d.promise},f=function(a){return d(a,null,!0)},g=function(d,e){var f=a.defer();return c.endpoints().then(function(a){var c=a._links[e][0].href,g=b(c,{});g.save(d,function(a){f.resolve(a)},function(a){405===a.status?g.save(d,function(a){f.resolve(a)},function(a){f.reject(a)}):f.reject(a)})},function(a){a.data={},a.data._error={},a.data._error.label="MSG_Tech_TechnicalError",f.reject(a)}),f.promise},h=function(a,b){return b._links&&b._links[a]?!0:!1};return{getHalResource:d,getCancelHalResource:f,postHalResource:g,isResourceAvailable:h}}]);